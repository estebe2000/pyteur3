(()=>{"use strict";var e,t,a,n,s={5303:(e,t,a)=>{var n=a(9158);const s=async(e,t)=>e instanceof globalThis.OffscreenCanvas?await e.convertToBlob({type:t}):await new Promise(((a,n)=>{e.toBlob((e=>{null==e?n():a(e)}),t)}));class r extends n.fI{constructor(e){super(e),this._initInnerCode='open Js_of_ocaml\nmodule Basthon = struct\n  let download (path: string): unit = ignore((Js.Unsafe.eval_string "self.basthon.__kernel__")##download path)\n  let sleep (duration: float): unit = ignore((Js.Unsafe.eval_string "self.basthon")##sleep duration)\n  let create_canvas () = (Js.Unsafe.eval_string "self.basthon.__kernel__")##createcanvas()\n  let display_canvas canvas: unit = ignore((Js.Unsafe.eval_string "self.basthon")##displayCanvas canvas)\n  let save_canvas canvas (path: string): unit = ignore((Js.Unsafe.eval_string "self.basthon.__kernel__")##savecanvas canvas path)\n  let download_canvas ?(format = "png") canvas: unit = ignore((Js.Unsafe.eval_string "self.basthon")##downloadCanvas canvas (Js.string format))\n  let display_image (path: string): unit = ignore((Js.Unsafe.eval_string "self.basthon.__kernel__")##displayimage path)\n  let version () : string = (Js.Unsafe.eval_string "self.basthon.__kernel__")##version()\n  let help () : unit = print_endline {ext|Basthon module\n  help:               Show this help.\n  download path:      Download a file from the local filesystem.\n  sleep duration:     Sleep for a certain amount of seconds.\n  display_image path: Display a PNG image from the local filesystem.\n  create_canvas:      Create a HTML5 canvas to be displayed with display_canvas.\n  display_canvas canvas:   Display a HTML5 canvas created with create_canvas.\n  save_canvas canvas path: Save a canvas to a PNG/JPG file to the local filesystem.\n  download_canvas ?(format = "png") canvas: Download a canvas to a PNG/JPG file.\n|ext}\nend'}language(){return"ocaml"}async _init(e){console.info=(...e)=>console.log(...e),console.warn=(...e)=>console.error(...e),globalThis.addEventListener("error",(e=>console.error(e.toString())));const{__kernel__:t}=await Promise.all([a.e(950),a.e(974)]).then(a.t.bind(a,950,23));if(this.__kernel__=t,0!==this.__kernel__?.init?.())throw new Error("Can't start OCaml kernel!");self.jsoo_runtime.caml_gr_draw_image=(e,t,a)=>{const n=self.jsoo_runtime.caml_gr_state_get();return n.context.putImageData(e,t,n.height-e.height-a),0},this.__kernel__?.exec(this._initInnerCode)}async _eval(e,t){if(null==this.__kernel__)return;this.__eval_data__=e,this.__kernel__.io.stdout=(...t)=>{this.sendStdoutStream(e,t.join(" "))},this.__kernel__.io.stderr=(...t)=>{this.sendStderrStream(e,t.join(" "))};const a=this.__kernel__?.exec(t);return"string"==typeof a&&a.length>0?{"text/plain":a.replace(/\n$/,"")}:void 0}async legacyStart(){if(0!==this.__kernel__?.init?.())throw new Error("Can't start OCaml kernel!");this.__kernel__?.exec(this._initInnerCode)}async legacyStop(){}async more(e){return!1}putFile(e,t){null!=this.__kernel__&&this.__kernel__.createfile(e,t)}putModule(e,t){this.putFile(e,t),this.__kernel__?.loadmodule(e)}ocamlDownload(e,t){const a=self.jsoo_runtime.caml_convert_bytes_to_array(e);this.download(a,t)}displayCanvas(e){this.display(e)}async saveCanvas(e,t){if(null==this.__kernel__)return;const a=t.split(".").pop()?.toLowerCase();let n="image/png";"jpg"!==a&&"jpeg"!==a||(n="image/jpeg");const r=(async()=>{const a=await s(e,n),r=await a.arrayBuffer();this.__kernel__.createfile(t,r)})();this.addEvalPromise(r),await r}async downloadCanvas(e,t){null==t&&(t="png");const a={jpg:"image/jpeg",jpeg:"images/jpeg",png:"image/png"};(t=t.toString().toLowerCase())in a||(t="png");const n=a[t],r=(async()=>{const a=await s(e,n);let r=await this.blobToDataURL(a);this.download(r,`canvas.${t}`)})();this.addEvalPromise(r),await r}async displayImage(e){const t=this.clone(this.__eval_data__),a=self.jsoo_runtime.caml_convert_bytes_to_array(e),n=new Blob([a],{type:"image/png"}),s=this.displayBlob(n,t);this.addEvalPromise(s),await s}}(0,n.p)(r)}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return s[e].call(a.exports,a,a.exports,o),a.exports}o.m=s,o.x=()=>{var e=o.O(void 0,[900,158],(()=>o(5303)));return o.O(e)},e=[],o.O=(t,a,n,s)=>{if(!a){var r=1/0;for(_=0;_<e.length;_++){for(var[a,n,s]=e[_],i=!0,l=0;l<a.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(i=!1,s<r&&(r=s));if(i){e.splice(_--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var _=e.length;_>0&&e[_-1][2]>s;_--)e[_]=e[_-1];e[_]=[a,n,s]},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var r={};t=t||[null,a({}),a([]),a(a)];for(var i=2&n&&e;"object"==typeof i&&!~t.indexOf(i);i=a(i))Object.getOwnPropertyNames(i).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,o.d(s,r),s},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,a)=>(o.f[a](e,t),t)),[])),o.u=e=>"assets/"+e+"."+{158:"0c0e6c698b68bce98e7c",396:"a864d0dc5998863445a3",450:"174a8e21ae2619db936e",477:"8de5a5249a40897ea67b",858:"8de5a5249a40897ea67b",900:"857db25ab265fcf5e2aa",950:"254fa4cfeb8a357fe6e9",955:"e3969fbdefa22cd1fb6b",974:"d43554f67679d674ba75"}[e]+".js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../"})(),(()=>{o.b=self.location+"/../../";var e={303:1,684:1};o.f.i=(t,a)=>{e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunk_basthon_basthon_console=self.webpackChunk_basthon_basthon_console||[],a=t.push.bind(t);t.push=t=>{var[n,s,r]=t;for(var i in s)o.o(s,i)&&(o.m[i]=s[i]);for(r&&r(o);n.length;)e[n.pop()]=1;a(t)}})(),n=o.x,o.x=()=>Promise.all([o.e(900),o.e(158)]).then(n),o.x()})();
//# sourceMappingURL=303.ce9c2a56de0e8c36e675.js.map