"use strict";(self.webpackChunk_basthon_basthon_console=self.webpackChunk_basthon_basthon_console||[]).push([[31],{6412:(e,o,t)=>{var s=t(9158);class r extends s.fI{constructor(e){super(e),this._pyodideURLs=["https://cdn.jsdelivr.net/pyodide/v{PYODIDE_VERSION}/full/pyodide.js"],this.__kernel__=null,this.pythonVersion="",this._pyodideURLs.unshift(`${this.basthonRoot()}/pyodide/pyodide.js`),this._pyodideURLs=e?.pyodideURLs??this._pyodideURLs}language(){return"python3"}basthonModulesRoot(){return this.basthonRoot()+"/modules"}async _onload(){const e=self.pyodide,o=e._api.repodata_packages;for(let e of Object.keys(o)){const t=o[e];t.file_name=t.file_name.replace("{basthonRoot}",this.basthonRoot())}this.pythonVersion=e.runPython("import platform ; platform.python_version()"),await e.loadPackage("basthon"),this.__kernel__=e.pyimport("basthon").__kernel__,this.__kernel__.start()}async _init(){let e=this._pyodideURLs[0];for(let o of this._pyodideURLs){o=o.replace("{PYODIDE_VERSION}","0.23.2");try{if((await fetch(o,{method:"HEAD"})).ok){e=o;break}}catch(e){}}try{await(0,s.k0)(e)}catch(e){throw console.log(e),console.error("Can't load pyodide.js"),e}if(null==self.loadPyodide)throw console.log("self.loadPyodide is null!"),new Error("Can't load pyodide.js");try{self.pyodide=await self.loadPyodide({lockFileURL:this.basthonRoot()+"/repodata.json"})}catch(e){throw console.log(e),console.error("Can't load Python from Pyodide"),e}await this._onload()}get execution_count(){return this.__kernel__.execution_count()}async _eval(e,o){const t=await this.__kernel__.eval(o,(o=>this.sendStdoutStream(e,o)),(o=>this.sendStderrStream(e,o)),e);if(!(t instanceof self.pyodide.ffi.PyProxy))throw t;const s=t.toJs({create_proxies:!1,dict_converter:Object.fromEntries});return t.destroy(),s[0]}async legacyStart(){this.__kernel__.start()}async legacyStop(){this.__kernel__.stop()}async complete(e){const o=this.__kernel__.complete(e);if(!(o instanceof self.pyodide.ffi.PyProxy))return o;const t=o.toJs();return o.destroy(),t}async more(e){return this.__kernel__.more(e)}readdir(e){return self.pyodide._module.FS.readdir(e)}chdir(e){self.pyodide._module.FS.chdir(e)}mkdir(e){self.pyodide._module.FS.mkdir(e)}async putFile(e,o){this.__kernel__.put_file(e,o)}async getFile(e){return this.__kernel__.get_file(e).toJs()}async putModule(e,o){return await this.__kernel__.put_module(e,o)}async getUserModuleFile(e){return this.__kernel__.get_user_module_file(e).toJs()}async userModules(){const e=this.__kernel__.user_modules();if(!(e instanceof self.pyodide.ffi.PyProxy))return e;const o=e.toJs();return e.destroy(),o}async displayMatplotlibIFrame(e){const o=this.displayKernelIFrame(e);o.onmessage=e=>{console.log("Kernel Worker says: 'Message received from iframe: "+e.data+"'"),o.postMessage("hello from kernel worker")}}}(0,s.p)(r)}}]);
//# sourceMappingURL=31.118b4600b76e1e94e81e.js.map