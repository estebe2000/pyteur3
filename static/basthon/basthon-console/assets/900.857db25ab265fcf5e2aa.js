/*! For license information please see 900.857db25ab265fcf5e2aa.js.LICENSE.txt */
"use strict";(self.webpackChunk_basthon_basthon_console=self.webpackChunk_basthon_basthon_console||[]).push([[900],{2575:(t,e,n)=>{n.d(e,{z:()=>o});var s=n(9610),r=n(1236),i=n(1838);class a extends Event{constructor(t,e){super(t),this.detail=e}}class o{constructor(t){this._isReady=!1,this._ready=new s.D,this._stopped=Promise.resolve(),this._execution_count=0,this._pendingInput=void 0,this._listeners=new Map,this._files=new Map,this._modules=new Map,this._options=this.clone(t),this._rootPath=t.rootPath}safeKernel(){return!1}version(){return r.x}language(){throw new i.EH("language")}languageName(){throw new i.EH("languageName")}moduleExts(){throw new i.EH("moduleExts")}get execution_count(){return this._execution_count}evalAsync(t,e,n,s=null){throw new i.EH("evalAsync")}async putFile(t,e){this._files.set(t,e)}async putModule(t,e){this._modules.set(t,e)}async userModules(){return[]}async getFile(t){throw new i.EH("getFile")}async getUserModuleFile(t){throw new i.EH("getUserModuleFile")}async more(t){throw new i.EH("more")}async complete(t){return[]}banner(){return`Welcome to the ${this.languageName()} REPL!`}ps1(){return">>> "}ps2(){return"... "}async _init(){}async init(){this.safeKernel()||console.warn("%c⚠ DANGER ⚠: this kernel is not safe! Please consider using a safe kernel.","color: red; font-size: 20px;");try{await this._init()}catch(t){throw this._ready.reject(t),t}this.addEventListener("eval.request",this.evalFromEvent.bind(this)),await this.start()}async _start(){}async start(){await this._stopped,this._execution_count=0;try{await this._start()}catch(t){throw this._ready.reject(t),t}this._files.forEach(((t,e)=>this.putFile(e,t))),this._modules.forEach(((t,e)=>this.putModule(e,t))),this._isReady=!0,this._ready.resolve()}async _stop(){}stop(){this._isReady=!1,this._ready=new s.D,this._stopped=this._stop()}restart(){this.stop(),this.start()}get isReady(){return this._isReady}async ready(){return this._ready.promise}assetsURL(t=!1){let e=this._rootPath;if(t&&!e.startsWith("http")){const t=window.location.origin+window.location.pathname;e=t.substring(0,t.lastIndexOf("/"))+"/"+e}return e}basthonRoot(t=!1){return this.assetsURL(t)+"/"+this.version()+"/"+this.language()}download(t,e){if(!("string"==typeof t||t instanceof String)){const e=new Blob([t],{type:"application/octet-stream"});t=window.URL.createObjectURL(e)}const n=document.createElement("a");n.download=e,n.href=t,n.target="_blank",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}dispatchEvent(t,e){document.dispatchEvent(new a(`basthon.${t}`,e))}addEventListener(t,e){const n=t=>e(t.detail);document.addEventListener(`basthon.${t}`,n);let s=this._listeners.get(t);null==s&&(s=new Map,this._listeners.set(t,s)),s.set(e,n)}removeEventListener(t,e){const n=this._listeners.get(t);document.removeEventListener(`basthon.${t}`,n?.get(e))}async inputAsync(t,e=!1,n=void 0){(n=this.clone(n)).content={prompt:t,password:e};const r=new s.D;n.resolve=r.resolve.bind(r),n.reject=r.reject.bind(r),this._pendingInput=r,this.dispatchEvent("eval.input",n);const i=await r.promise;return this._pendingInput=void 0,i}resolvePendingInput(){this._pendingInput?.resolve("")}clone(t){return JSON.parse(JSON.stringify(t))}async putRessource(t,e){const n=t.split(".").pop()??"";return this.moduleExts().includes(n)?await this.putModule(t,e):await this.putFile(t,e)}pendingInput(){return null!=this._pendingInput}async evalFromEvent(t){const e=e=>n=>{let s=this.clone(t);s.stream=e,s.content=n,this.dispatchEvent("eval.output",s)},n=e("stdout"),s=e("stderr");let r;try{r=await this.evalAsync(t.code,n,s,t)}catch(e){s(e.toString());const n=this.clone(t);return n.error=e,n.execution_count=this.execution_count,void this.dispatchEvent("eval.error",n)}if(null==r)return;const i=r[0],a=r[1];let o=this.clone(t);o.execution_count=a,null!=i&&(o.result=i),this.dispatchEvent("eval.finished",o)}}},1236:(t,e,n)=>{n.d(e,{x:()=>s});const s="0.73.2"},4590:(t,e,n)=>{n.d(e,{LV:()=>p,UD:()=>r,k0:()=>E,p:()=>u});const s=Symbol("Comlink.proxy"),r=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),o=Symbol("Comlink.thrown"),c=t=>"object"==typeof t&&null!==t||"function"==typeof t,l=new Map([["proxy",{canHandle:t=>c(t)&&t[s],serialize(t){const{port1:e,port2:n}=new MessageChannel;return u(t,e),[n,[n]]},deserialize:t=>(t.start(),p(t))}],["throw",{canHandle:t=>c(t)&&o in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function u(t,e=globalThis,n=["*"]){e.addEventListener("message",(function r(i){if(!i||!i.data)return;if(!function(t,e){for(const n of t){if(e===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}return!1}(n,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);const{id:c,type:l,path:p}=Object.assign({path:[]},i.data),d=(i.data.argumentList||[]).map(b);let g;try{const e=p.slice(0,-1).reduce(((t,e)=>t[e]),t),n=p.reduce(((t,e)=>t[e]),t);switch(l){case"GET":g=n;break;case"SET":e[p.slice(-1)[0]]=b(i.data.value),g=!0;break;case"APPLY":g=n.apply(e,d);break;case"CONSTRUCT":g=function(t){return Object.assign(t,{[s]:!0})}(new n(...d));break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;u(t,n),g=E(e,[e])}break;case"RELEASE":g=void 0;break;default:return}}catch(t){g={value:t,[o]:0}}Promise.resolve(g).catch((t=>({value:t,[o]:0}))).then((n=>{const[s,i]=_(n);e.postMessage(Object.assign(Object.assign({},s),{id:c}),i),"RELEASE"===l&&(e.removeEventListener("message",r),h(e),a in t&&"function"==typeof t[a]&&t[a]())})).catch((t=>{const[n,s]=_({value:new TypeError("Unserializable return value"),[o]:0});e.postMessage(Object.assign(Object.assign({},n),{id:c}),s)}))})),e.start&&e.start()}function h(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function p(t,e){const n=new Map;return t.addEventListener("message",(function(t){const{data:e}=t;if(!e||!e.id)return;const s=n.get(e.id);if(s)try{s(e)}finally{n.delete(e.id)}})),m(t,n,[],e)}function d(t){if(t)throw new Error("Proxy has been released and is not useable")}function g(t){return R(t,new Map,{type:"RELEASE"}).then((()=>{h(t)}))}const y=new WeakMap,f="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(y.get(t)||0)-1;y.set(t,e),0===e&&g(t)}));function m(t,e,n=[],s=function(){}){let a=!1;const o=new Proxy(s,{get(s,r){if(d(a),r===i)return()=>{!function(t){f&&f.unregister(t)}(o),g(t),e.clear(),a=!0};if("then"===r){if(0===n.length)return{then:()=>o};const s=R(t,e,{type:"GET",path:n.map((t=>t.toString()))}).then(b);return s.then.bind(s)}return m(t,e,[...n,r])},set(s,r,i){d(a);const[o,c]=_(i);return R(t,e,{type:"SET",path:[...n,r].map((t=>t.toString())),value:o},c).then(b)},apply(s,i,o){d(a);const c=n[n.length-1];if(c===r)return R(t,e,{type:"ENDPOINT"}).then(b);if("bind"===c)return m(t,e,n.slice(0,-1));const[l,u]=w(o);return R(t,e,{type:"APPLY",path:n.map((t=>t.toString())),argumentList:l},u).then(b)},construct(s,r){d(a);const[i,o]=w(r);return R(t,e,{type:"CONSTRUCT",path:n.map((t=>t.toString())),argumentList:i},o).then(b)}});return function(t,e){const n=(y.get(e)||0)+1;y.set(e,n),f&&f.register(t,e,t)}(o,t),o}function w(t){const e=t.map(_);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const v=new WeakMap;function E(t,e){return v.set(t,e),t}function _(t){for(const[e,n]of l)if(n.canHandle(t)){const[s,r]=n.serialize(t);return[{type:"HANDLER",name:e,value:s},r]}return[{type:"RAW",value:t},v.get(t)||[]]}function b(t){switch(t.type){case"HANDLER":return l.get(t.name).deserialize(t.value);case"RAW":return t.value}}function R(t,e,n,s){return new Promise((r=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.set(i,r),t.start&&t.start(),t.postMessage(Object.assign({id:i},n),s)}))}}}]);
//# sourceMappingURL=900.857db25ab265fcf5e2aa.js.map